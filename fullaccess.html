<!DOCTYPE html>



<!--suppress ALL -->
<html>

<head>

    <meta charset="UTF-8">

    <title>Red Cross</title>



    <style type="text/css">

        #footerRef{
            color: #157efb;
        }
        #footerRef:hover{
            color: blue;
        }
        
        #content{

            width: 50%;

            margin: 20px auto;

            border: 1px solid #cbcbcb;

        }
        a:link {
            text-decoration: none;
        }

        a:visited {
            text-decoration: none;
        }

        a:hover {
            text-decoration: none;
        }

        a:active {
            text-decoration: none;
        }
    </style>

    <style>

        * {

            box-sizing: border-box;

        }


        html {
    
    
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin: 0;
    
            width: 100%;
        }

        body {
    
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin: 0;
    
            font-family: Arial, Helvetica, sans-serif;
        }



        /* Float four columns side by side */

        .columnn {

            width: 70%;

            padding: 10px 0px 10px 0px;

        }



        /* Remove extra left and right margins, due to padding */





        /* Clear floats after the columns */

        .roww:after {

            content: "";

            display: table;

            clear: both;

        }



        /* Responsive columns */

        @media screen and (max-width: 600px) {

            .columnn {

                width: 100%;

                display: block;

                margin-bottom: 20px;

            }

        }



        /* Style the counter cards */

        .cardd {

            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);

            padding: 48px;

            text-align: center;

            background-color: #f1f1f1;

        }



        .redCard {

            box-shadow: 0 4px 8px 0 rgba(178, 15, 23, 1);

            padding: 48px;

            text-align: center;

            background-color: rgba(178, 15, 23, 1);
    
        }



        .greenCard {

            box-shadow: 0 4px 8px 0 rgba(0, 140, 33, 1);

            padding: 16px;

            text-align: center;

            background-color: green;

        }





        .reportDate {

            font-size: .67em;

            font-weight: normal;

        }



        .reportTitle {

            font-size: 88px;

        }



        #allUsers{

            left: 50%;

        }



        footer {
            bottom: 0px;
            height: auto;
        }

        #grad {
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin: 0 ;
            background-image: linear-gradient(to bottom, #ffffff , #e6e6e6);
        }

















        .loader {
            border: 16px solid #f3f3f3;
            border-radius: 50%;
            border-top: 16px solid #3498db;
            width: 120px;
            height: 120px;
            -webkit-animation: spin 2s linear infinite; /* Safari */
            animation: spin 2s linear infinite;
            cursor: wait;
        }

        /* Safari */
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }



        .header {
            overflow: hidden;

            padding: 20px 10px;
            color:blue;
        }

        .header a {
            float: left;
            color: black;
            text-align: center;
            padding: 12px;
            text-decoration: none;
            font-size: 18px;
            line-height: 25px;
            border-radius: 4px;
        }

        /*noinspection ALL*/
        .header a.logo {
            text-decoration: none;
            font-size: 25px;
            font-weight: bold;
        }

        .header a:hover {
            text-decoration: none;
            background-color: #ddd;
            color: black;
        }

        .header a.active {
            text-decoration: none;
            background-color: dodgerblue;
            color: white;
        }

        .header-right {
            background-color: #f1f1f1;
            float: right;
        }

        @media screen and (max-width: 500px) {
            .header a {
                float: none;
                display: block;
                text-align: left;
            }

            .header-right {
                float: none;
            }
        }


        /*noinspection ALL*/
        h1 {
            font-family: "Playfair Display";
            letter-spacing: 5px;
        }


    </style>
    
    
    <meta charset="UTF-8">
    
    <title>Red Cross</title>
    
    
    
    <style type="text/css">
        
        #content{
            
            width: 50%;
            
            margin: 20px auto;
            
            border: 1px solid #cbcbcb;
            
        }
        a:link {
            text-decoration: none;
        }
        
        a:visited {
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: none;
        }
        
        a:active {
            text-decoration: none;
        }
    </style>
    
    <style>
        
        * {
            
            box-sizing: border-box;
            
        }
        
        
        html {
            
            
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin: 0;
            
            width: 100%;
        }
        
        body {
            
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin: 0;
            
            font-family: Arial, Helvetica, sans-serif;
        }
        
        
        
        /* Float four columns side by side */
        
        .columnn {
            
            width: 70%;
            
            padding: 10px 0px 10px 0px;
            
        }
        
        
        
        /* Remove extra left and right margins, due to padding */
        
        
        
        
        
        /* Clear floats after the columns */
        
        .roww:after {
            
            content: "";
            
            display: table;
            
            clear: both;
            
        }
        
        
        
        /* Responsive columns */
        
        @media screen and (max-width: 600px) {
            
            .columnn {
                
                width: 100%;
                
                display: block;
                
                margin-bottom: 20px;
                
            }
            
        }
        
        
        
        /* Style the counter cards */
        
        .cardd {
            
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            
            padding: 48px;
            
            text-align: center;
            
            background-color: #f1f1f1;
            
        }
        
        
        
        .redCard {
            
            box-shadow: 0 4px 8px 0 rgba(178, 15, 23, 1);
            
            padding: 48px;
            
            text-align: center;
            
            background-color: rgba(178, 15, 23, 1);
            
        }
        
        
        
        .greenCard {
            
            box-shadow: 0 4px 8px 0 rgba(0, 140, 33, 1);
            
            padding: 16px;
            
            text-align: center;
            
            background-color: green;
            
        }
        
        
        
        
        
        .reportDate {
            
            font-size: .67em;
            
            font-weight: normal;
            
        }
        
        
        
        .reportTitle {
            
            font-size: 88px;
            
        }
        
        
        
        #allUsers{
            
            left: 50%;
            
        }
        
        
        

        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        .loader {
            border: 16px solid #f3f3f3;
            border-radius: 50%;
            border-top: 16px solid #3498db;
            width: 120px;
            height: 120px;
            -webkit-animation: spin 2s linear infinite; /* Safari */
            animation: spin 2s linear infinite;
            cursor: wait;
        }
        
        /* Safari */
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        
        
        .header {
            overflow: hidden;
            
            padding: 20px 10px;
            color:blue;
        }
        
        .header a {
            float: left;
            color: black;
            text-align: center;
            padding: 12px;
            text-decoration: none;
            font-size: 18px;
            line-height: 25px;
            border-radius: 4px;
        }
        
        /*noinspection ALL*/
        .header a.logo {
            text-decoration: none;
            font-size: 25px;
            font-weight: bold;
        }
        
        .header a:hover {
            text-decoration: none;
            background-color: #ddd;
            color: black;
        }
        
        .header a.active {
            text-decoration: none;
            background-color: dodgerblue;
            color: white;
        }
        
        .header-right {
            background-color: #f1f1f1;
            float: right;
        }
        
        @media screen and (max-width: 500px) {
            .header a {
                float: none;
                display: block;
                text-align: left;
            }
            
            .header-right {
                float: none;
            }
        }
        
        
        /*noinspection ALL*/
        h1 {
            font-family: "Playfair Display";
            letter-spacing: 5px;
        }
    
    
    </style>
    
<!--    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
<!--    -->
<!--    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    
    
    <style>
        /*** COLORS ***/
        /*** DEMO ***/
        
        p {
            margin-top: 30px;
        }
        .cntr {
            font: 13px monospace;
            color: black;
            display: table;
            width: 100%;
            height: 100%;
        }
        .cntr .cntr-innr {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        /*** STYLES ***/
        .search {
            display: inline-block;
            position: relative;
            height: 35px;
            width: 35px;
            box-sizing: border-box;
            margin: 0px 8px 7px 0px;
            padding: 7px 9px 0px 9px;
            border: 3px solid black;
            border-radius: 25px;
            transition: all 200ms ease;
            cursor: text;
        }
        .search:after {
            content: "";
            position: absolute;
            width: 3px;
            height: 20px;
            right: -5px;
            top: 21px;
            background: black;
            border-radius: 3px;
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg);
            transition: all 200ms ease;
        }
        .search.active,
        .search:hover {
            width: 200px;
            margin-right: 0px;
        }
        .search.active:after,
        .search:hover:after {
            height: 0px;
        }
        .search input {
            width: 100%;
            border: none;
            box-sizing: border-box;
            font-family: Helvetica;
            font-size: 15px;
            color: inherit;
            background: transparent;
            outline-width: 0px;
        }
    
    </style>
    
    
    
<!--    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->

<!--    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    
    
<style>
    /*** COLORS ***/
    /*** DEMO ***/

    p {
        margin-top: 30px;
    }
    .cntr {
        font: 13px monospace;
        color: black;
        display: table;
        width: 100%;
        height: 100%;
    }
    .cntr .cntr-innr {
        display: table-cell;
        text-align: center;
        vertical-align: middle;
    }
    /*** STYLES ***/
    .search {
        display: inline-block;
        position: relative;
        height: 35px;
        width: 35px;
        box-sizing: border-box;
        margin: 0px 8px 7px 0px;
        padding: 7px 9px 0px 9px;
        border: 3px solid black;
        border-radius: 25px;
        transition: all 200ms ease;
        cursor: text;
    }
    .search:after {
        content: "";
        position: absolute;
        width: 3px;
        height: 20px;
        right: -5px;
        top: 21px;
        background: black;
        border-radius: 3px;
        -webkit-transform: rotate(-45deg);
        transform: rotate(-45deg);
        transition: all 200ms ease;
    }
    .search.active,
    .search:hover {
        width: 200px;
        margin-right: 0px;
    }
    .search.active:after,
    .search:hover:after {
        height: 0px;
    }
    .search input {
        width: 100%;
        border: none;
        box-sizing: border-box;
        font-family: Helvetica;
        font-size: 15px;
        color: inherit;
        background: transparent;
        outline-width: 0px;
    }

</style>


</head>





<header>

<!--    <div id="branding" >-->

<!--        <a onclick="logout()" style = "cursor: pointer;text-decoration: none; color: blue; float: right; margin-right: 10px; margin-top: 5px; margin-bottom: 20px;">Logout</a>-->



<!--    </div>-->

    <link rel="stylesheet" href="footer.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-database.js"></script>
<!--    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase.js"></script>-->
    <script src="https://cdn.firebase.com/libs/firebaseui/4.2.0/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/4.2.0/firebaseui.css" />
    <script src="bundle.js"></script>
<!--    <script src="app.js"></script>-->


    <script>

        var favoritemovie = localStorage.getItem("favoriteMovie");




        //function checkPr() {
            //console.clear();
            var privChecker = -1;
            
            var isUserAdmin = localStorage.getItem("isUAdmin");
            
            if(isUserAdmin != "2"){
                //alert("FULL ACCESS: " + isUserAdmin);
                //alert("Full access");
                firebase.auth().signOut()
        
                    .then(function () {
            
                        localStorage.clear();
                        window.location.href = 'index.html';
            
                        //location.reload();
            
            
                        // Sign-out successful.
            
                    })
        
                    .catch(function (error) {
            
                        alert("SIGN OUT ERROR");
            
                        // An error happened
            
                    });

                //window.location.href = 'index.html';

            }
            /*
            else{
                document.getElementById("PreLoaderBar").style.display = "none";
                document.getElementById("titlee").innerHTML = "Users";
    
                document.getElementById("allUsers").style.fontWeight = "bold";
                document.getElementById("allUsers").innerHTML = "<br><br><br><br><br><br><br><h1>No name is searched!</h1>";
            }
             */
            
            
            function checkSuccess(){
                document.getElementById("PreLoaderBar").style.display = "none";
                document.getElementById("titlee").innerHTML = "Users";
    
                document.getElementById("allUsers").style.fontWeight = "bold";
                document.getElementById("allUsers").innerHTML = "<br><br><br><br><br><br><br><h1>No name is searched!</h1>";
            }
        //}
    </script>





</header>







<!--<body id = "grad" style="background-color:#ffffff;" onload="checkPr()">-->
<body id = "grad" style="background-color:#ffffff;" onload="checkSuccess()">

<div class="header" style="text-decoration: none">

    <div class="header-right">

        <a onclick="logout()" style="cursor: pointer">Logout</a>


    </div>
</div>
<img src='images/LogoRC.png' style='display: block; margin-left: auto; margin-right: auto; width:250px; height:250px;'/>



<div class="indeterminate"></div>








<div id = "entries"></div>

<!--<img src='images/LogoRC.png' style='-->

<!--  margin-left: 42%; width:250px; height:250px;'/>-->

<h1 id = "titlee" style="display: block; margin-top: 50px; margin-bottom: 20px; margin-left: auto; margin-right: auto; text-align: center"></h1>

<!--<div class = "roww">-->
<!--    <div class = "column">-->
<!--        <div class = "cardd">-->
<!--            <div class = "createInfo">-->
<!--            </div>-->
<!--        </div></div></div>-->


<div id = "inpt_hide_" class="cntr">
    <div class="cntr-innr">
        <label class="search" for="inpt_search">
            <input id="inpt_search" type="text" />
        </label>
    </div>
</div>
<br>

<div id = "allUsers" align="center"></div>

<div class="loader" id="PreLoaderBar" style="display: block; margin-top: 250px; margin-left: auto; margin-right: auto; text-align: center"></div>

<script>
    console.clear();
    function toTitleCase(str) {
        return str.replace(/\w\S*/g, function(txt){
            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
        });
    }
    
    var doneSearch = false;
    var firstLoop = "false"
    var oncee = "false";
    console.clear();
    $("#inpt_search").unbind("on").on('change textInput input', function (e) {


        $(this).parent('label').addClass('active');


        if($("#inpt_search").val().toString() !== "") {
            //$("#inpt_search").val().toString().length>2
            if (oncee === "false" || $("#inpt_search").val().toString().length>1){
    
            
            //alert($("#inpt_search").val());
                $("#inpt_search").unbind("on");
            //alert($("#inpt_search").val().toString());

            var keyz; //TODO after first search (WRITING LETTER A) it keeps updating


            //firebase.database().ref('user/').orderByChild($("#inpt_search").val().toString()).once('value', (snapshott) => {

            //snapshott.forEach(function(data) {
            //alert(data.key);
            //keyz = data.key;


            var leadsRef = firebase.database().ref('user/LoR41MjKKz4V5V3UIdG');
            var currentID;
            var currentCenter;

            var favoritemovie = localStorage.getItem("favoriteMovie");
            if (favoritemovie != null) {

                var bd = document.getElementById("allUsers");
                var createDivRow = document.createElement('div');
    
                console.clear();
                firebase.database().ref('user/').child(favoritemovie).once('value', (snapshot) => {
                    console.clear();
                    oncee = "true";
                    var data = snapshot.val();

                    if (snapshot.exists()) {

                        for (let key in data) {

                            //console.log("data[key]", data["Center"]);

                            currentCenter = data["Center"];


                        }
                        document.getElementById("PreLoaderBar").style.display = "flex";
                        document.getElementById("allUsers").innerHTML = "";
                        
                        var toLo = $("#inpt_search").val().toString();
                        var ppe = toLo[0].toUpperCase() + toLo.slice(1);

                        var toT = toTitleCase(toLo);
                        //alert("HERE: " + toT);
                        //alert(ppe);
                        console.clear();
                        firebase.database().ref('user/').orderByChild('Name').equalTo(toT).once('value', (snapshott) => {
                            console.clear();


                            var dataa = snapshott.val();


                            var k = 0;

                            if (snapshott.exists()) {
                                //alert("TTT");
    
                                

                                snapshott.forEach(function (child) {

                                    firebase.database().ref('user/').child(child.key).once('value', (snapshottt) => {
                                        console.clear();
                                        //alert(key);
                                        //alert(snapshott);

                                        var dataaa = snapshottt.val();


                                        if (snapshottt.exists()) {


                                            for (let key in dataaa) {
                                                //alert(dataaa["Name"]);


                                                if (snapshottt.key != favoritemovie) {
                                                    
                                                    doneSearch = true;

                                                    createDivRow.className = "roww";


                                                    var createDivColumn = document.createElement('div');

                                                    createDivColumn.className = "columnn";


                                                    var createDivCard = document.createElement('div');
    
    
                                                    var createInfo = document.createElement('div');
                                                    createDivCard.className = "cardd";
    
                                                    
                                                    var adminText = "";
                                                    
                                                    
                                                    if(dataaa["Admin"] === 1){
                                                        adminText = "admin";
                                                        
                                                        createInfo.innerHTML = "<h3>" + dataaa["Name"] + " <span style='font-size: 18px; color: #d33'>" + adminText + "</span></h3><p style='color: blue;'><a href='tel:" + dataaa["Phone Number"] + "'style='text-decoration: none; color: blue;'>" + dataaa["Phone Number"] + "</a></p><p>Home Address: " + dataaa["Home Address"] + "</p><p>ICE: <span style='color: blue;'><a href='tel:"
        
                                                            + dataaa["ICE"] + "'style='text-decoration: none; color: blue;'>"+ dataaa["ICE"] + "</a></span></p><p>Position: " + dataaa["Position"] + "<p>Center: <span style='color: red;'><b>" + dataaa["Center"] + "</b></span></p>";
    
    
                                                        createInfo.innerHTML +=
        
                                                            "<button onClick=deleteUser(this.id,this.className) id =" + snapshottt.key + "  class = " + data['Center'] + "  style='color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-danger btn-xs'> Delete User </span> </button>"
        
                                                            +
        
                                                            "<button onClick=removeAdmin(this.id,this.className) id =" + snapshottt.key + " style='margin-right: 5px; color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-warning btn-xs'> Remove admin </span></button>"
        
                                                            +
        
                                                            "<button disabled onClick=makeAdmin(this.id)   id =" + snapshottt.key + " style='margin-right: 5px; color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-primary btn-xs'> Make admin </span></button>";
                                                        
                                                    }
                                                    
                                                    else{
    
                                                        createInfo.innerHTML = "<h3>" + dataaa["Name"] + " <span style='font-size: 18px; color: #d33'>" + adminText + "</span></h3><p style='color: blue;'><a href='tel:" + dataaa["Phone Number"] + "'style='text-decoration: none; color: blue;'>" + dataaa["Phone Number"] + "</a></p><p>Home Address: " + dataaa["Home Address"] + "</p><p>ICE: <span style='color: blue;'><a href='tel:"
        
                                                            + dataaa["ICE"] + "'style='text-decoration: none; color: blue;'>"+ dataaa["ICE"] + "</a></span></p><p>Position: " + dataaa["Position"] + "<p>Center: <span style='color: red;'><b>" + dataaa["Center"] + "</b></span></p>";
    
    
                                                        createInfo.innerHTML +=
        
                                                            "<button onClick=deleteUser(this.id,this.className) id =" + snapshottt.key + "  class = " + data['Center'] + "  style='color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-danger btn-xs'> Delete User </span> </button>"
        
                                                            +
        
                                                            "<button disabled onClick=removeAdmin(this.id,this.className) id =" + snapshottt.key + " style='margin-right: 5px; color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-warning btn-xs'> Remove admin </span></button>"
        
                                                            +
        
                                                            "<button onClick=makeAdmin(this.id)   id =" + snapshottt.key + " style='margin-right: 5px; color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-primary btn-xs'> Make admin </span></button>";
    
                                                    }
                                                    
                                                    
                                                }


                                            }
                                            console.clear();
                                            document.getElementById("allUsers").innerHTML = "";
                                            document.getElementById("allUsers").style.fontWeight = "normal";
                                            document.getElementById("PreLoaderBar").style.display = "none";
                                            document.getElementById("inpt_hide_").style.visibility = "visible";
                                            document.getElementById("titlee").innerHTML = "Users";
                                            bd.appendChild(createDivRow).appendChild(createDivColumn).appendChild(createDivCard).appendChild(createInfo);
                                            //console.clear();
                                        }

                                    })


                                    //console.log("data[key]",data["Email"]);


                                });


                            }
                            else{
                                console.clear();
                                document.getElementById("PreLoaderBar").style.display = "none";
                                document.getElementById("allUsers").style.fontWeight = "normal";
                                if($("#inpt_search").val().toString().length>0){
                                    document.getElementById("allUsers").innerHTML = "<br><br><br><br><br><br><br><h1>"+ $("#inpt_search").val().toString() + " not found!</h1>";
                                }
                                else{
                                    document.getElementById("allUsers").innerHTML = "<br><br><br><br><br><br><br><h1>No name is searched!</h1>";
                                }
                            }


                        })


                    }

                })
                console.clear();
            } else {

            }
        }else{
                console.clear();
                oncee = "false";
                if(doneSearch = true){
                    document.getElementById("PreLoaderBar").style.display = "none";
                    document.getElementById("allUsers").style.fontWeight = "normal";
                    if($("#inpt_search").val().toString().length>0){
                        document.getElementById("allUsers").innerHTML = "<br><br><br><br><br><br><br><h1>"+ $("#inpt_search").val().toString() + " not found!</h1>";
                    }
                    else{
                        document.getElementById("allUsers").innerHTML = "<br><br><br><br><br><br><br><h1>No name is searched!</h1>";
                    }
                    doneSearch = false;
                }
            }
            

        }
        
        
        
        
        else{   //COMMENT THIS AND USE THE OTHER ONE
            document.getElementById("allUsers").style.fontWeight = "bold";
            document.getElementById("allUsers").innerHTML = "<br><br><br><br><br><br><br><h1>No name is searched!</h1>";
            console.clear();
        }
        //HERE FOR IF INPUT IS EMPTY --------------------------------------------------------
        // else {
        //     //alert($("#inpt_search").val().toString());
        // if($("#inpt_search").val().toString() === "") {
        //     //alert($("#inpt_search").val().toString());
        //     //alert(firstLoop);
        //
        //     if (firstLoop === "true") {
        //         firstLoop = "false";
        //         document.getElementById("allUsers").innerHTML = "";
        //         oncee = "false";
        //         $(this).parent('label').removeClass('active');
        //         var leadsRef = firebase.database().ref('user/LoR41MjKKz4V5V3UIdG');
        //         var currentID;
        //         var currentCenter;
        //
        //         var favoritemovie = localStorage.getItem("favoriteMovie");
        //
        //         if (favoritemovie != null) {
        //
        //             var bd = document.getElementById("allUsers");
        //             var createDivRow = document.createElement('div');
        //
        //
        //             firebase.database().ref('user/').child(favoritemovie).once('value', (snapshot) => {
        //
        //                 var data = snapshot.val();
        //
        //                 if (snapshot.exists()) {
        //
        //
        //                     for (let key in data) {
        //
        //                         //console.log("data[key]",data["Center"]);
        //
        //                         currentCenter = data["Center"];
        //
        //                         //this.intVal.push(data[key]);
        //
        //                         //console.log("intVal",this.intVal);
        //
        //
        //                     }
        //
        //
        //                     firebase.database().ref('user/').orderByChild('Name').once('value', (snapshott) => {
        //
        //
        //                         var dataa = snapshott.val();
        //                         if (snapshott.exists()) {
        //
        //
        //                             snapshott.forEach(function (child) {
        //
        //                                 //alert("TTsT" + child.key);
        //                                 //alert($("#inpt_search").val().toString());
        //
        //                                 firebase.database().ref('user/').child(child.key).once('value', (snapshottt) => {
        //
        //                                     var dataaa = snapshottt.val();
        //
        //
        //                                     if (snapshottt.exists()) {
        //
        //
        //                                         for (let key in dataaa) {
        //
        //                                             if (snapshottt.key != favoritemovie) {
        //
        //                                                 createDivRow.className = "roww";
        //
        //                                                 var createDivColumn = document.createElement('div');
        //
        //                                                 createDivColumn.className = "columnn";
        //
        //                                                 var createDivCard = document.createElement('div');
        //
        //                                                 createDivCard.className = "cardd";
        //
        //                                                 var createInfo = document.createElement('div');
        //
        //                                                 createInfo.innerHTML = "<h3>" + dataaa["Name"] + "</h3><p style='color: blue;'>" + dataaa["Phone Number"] + "</p><p>Home Address: " + dataaa["Home Address"] + "</p><p>ICE: <span style='color: blue;'>"
        //
        //                                                     + dataaa["ICE"] + "</span></p><p>Position: " + dataaa["Position"] + "<p>Center: <span style='color: red;'><b>" + dataaa["Center"] + "</b></span></p>";
        //
        //
        //                                                 createInfo.innerHTML +=
        //
        //                                                     "<button onClick=deleteUser(this.id,this.className) id =" + snapshottt.key + "  class = " + data['Center'] + "  style='color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-danger btn-xs'> Delete User </span> </button>"
        //
        //                                                     +
        //
        //                                                     "<button onClick=removeAdmin(this.id,this.className) id =" + snapshottt.key + " style='margin-right: 5px; color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-warning btn-xs'> Remove admin </span></button>"
        //
        //                                                     +
        //
        //                                                     "<button onClick=makeAdmin(this.id)   id =" + snapshottt.key + " style='margin-right: 5px; color: #e6e6e6; border: none; text-decoration: none; padding: 0; float: right;'> <span class='btn btn-primary btn-xs'> Make admin </span></button>";
        //                                             }
        //                                         }
        //
        //                                         document.getElementById("PreLoaderBar").style.display = "none";
        //                                         document.getElementById("inpt_hide_").style.visibility = "visible";
        //                                         document.getElementById("titlee").innerHTML = "Users";
        //                                         bd.appendChild(createDivRow).appendChild(createDivColumn).appendChild(createDivCard).appendChild(createInfo);
        //                                         //console.clear();
        //                                     }
        //                                 })
        //
        //                             });
        //
        //                         }
        //
        //                     })
        //
        //                 }
        //             })
        //
        //         } else {
        //
        //
        //         }
        //
        //
        //     } else {
        //         firstLoop = "true";
        //     }
        // }
        //
        //
        //
        //
        //
        //
        // }


    });

</script>




<script>
    
    function removeAdmin(userID) {
        
        swal({
                title: "Are you sure?",
                
                text: "Are you sure you want to remove ADMIN from this user?",
                
                type: 'warning',
                
                showCloseButton: true,
                
                showCancelButton: true,
                
                //confirmButtonColor: "#DD6B55",
                
                //confirmButtonColor: '#157efb',
                //cancelButtonColor: '#d33',
                
                confirmButtonColor: '#157efb',
                
                confirmButtonText: "Yes",
                
                
                cancelButtonText: "No",
                
                closeOnConfirm: true,
                
                
                closeOnCancel: true
            },
            
            function (isConfirm) {
                
                if (isConfirm) {
                    firebase.database().ref('user/' + userID).update({
                        
                        Admin: 0
                        
                    });
                    
                    location.reload();
                }
                
            });
        
        
        
    }


</script>


<script>
    
    function makeAdmin(userID) {
        
        swal({
                title: "Are you sure?",
                
                text: "Are you sure you want to make this user an admin?",
                
                type: 'info',
                
                showCloseButton: true,
                
                showCancelButton: true,
                
                //confirmButtonColor: "#DD6B55",
                
                //confirmButtonColor: '#157efb',
                //cancelButtonColor: '#d33',
                
                confirmButtonColor: '#157efb',
                
                confirmButtonText: "Yes",
                
                
                cancelButtonText: "No",
                
                closeOnConfirm: true,
                
                
                closeOnCancel: true
            },
            
            function (isConfirm) {
                
                if (isConfirm) {
                    
                    firebase.database().ref('user/' + userID).update({
                        
                        Admin: 1
                        
                    });
                    
                    location.reload();
                    
                    
                }
                
            });
        
        
        
    }

</script>


<script>
    
    function deleteUser(userID, centerLoc) {
        
        swal({
                title: "Are you sure?",
                
                text: "Are you sure you want to delete this user?",
                
                type: 'warning',
                
                showCloseButton: true,
                
                showCancelButton: true,
                
                //confirmButtonColor: "#DD6B55",
                
                //confirmButtonColor: '#157efb',
                //cancelButtonColor: '#d33',
                
                confirmButtonColor: '#d33',
                
                confirmButtonText: "Yes",
                
                
                cancelButtonText: "No",
                
                closeOnConfirm: true,
                
                
                closeOnCancel: true
            },
            
            function (isConfirm) {
                
                if (isConfirm) {
                    
                    firebase.database().ref('user/').child(userID).once('value', (snapshottt) => {
                        
                        var dataaa = snapshottt.val();
                        
                        var bd = document.getElementById("allUsers");
                        
                        if (snapshottt.exists()) {
                            //alert(snapshottt.key);
                            firebase.database().ref('user/').child(userID).remove();
                        }
                        
                    });
                    
                    
                    
                    
                    firebase.database().ref('Centers/' + centerLoc + '/members/').child(userID).once('value', (snapshottt) => {
                        
                        var dataaa = snapshottt.val();
                        
                        
                        if (snapshottt.exists()) {
                            //alert("HERE " + snapshottt.key);
                            firebase.database().ref('Centers/' + centerLoc + '/members/').child(userID).remove();
                        }
                        
                    });
                    
                    
                    
                    
                    
                    
                    
                    firebase.database().ref('Centers/' + centerLoc + '/broadcast/').once('value', (snapshottt) => {
                        
                        var dataaa = snapshottt.val();
                        
                        if (snapshottt.exists()) {
                            
                            for (let key in dataaa) {
                                
                                firebase.database().ref('Centers/' + centerLoc + '/broadcast/').child(key).child(userID).once('value', (snapshottt) => {
                                    
                                    var dataaa = snapshottt.val();
                                    if (snapshottt.exists()) {
                                        //alert(key + " " + snapshottt.key);
                                        firebase.database().ref('Centers/'+centerLoc+'/broadcast/').child(key).child(userID).remove();
                                    }
                                });
                            }
                        }
                    });
                    
                    
                    
                    
                    firebase.database().ref('Centers/' + centerLoc + '/reports/').once('value', (snapshottt) => {
                        
                        var dataaa = snapshottt.val();
                        var size = snapshottt.numChildren();
                        
                        var highEmergencyCounter = 0;
                        var mediumEmergencyCounter = 0;
                        var lowEmergencyCounter = 0;
                        var totalNumberOfEmergencies = 0;
                        
                        if(snapshottt.child("high").exists()){
                            highEmergencyCounter = snapshottt.child("high").numChildren();
                            //alert(snapshott.child("high").numChildren()); //highEmergencyCounter
                        }
                        if(snapshottt.child("medium").exists()){
                            mediumEmergencyCounter = snapshottt.child("medium").numChildren();
                            //alert(snapshott.child("medium").numChildren()); //highEmergencyCounter
                        }
                        if(snapshottt.child("low").exists()){
                            lowEmergencyCounter = snapshottt.child("low").numChildren();
                            //alert(snapshott.child("low").numChildren()); //highEmergencyCounter
                        }
                        
                        totalNumberOfEmergencies = highEmergencyCounter + mediumEmergencyCounter + lowEmergencyCounter;
                        
                        var temp = 0;
                        if (snapshottt.exists()) {
                            
                            
                            for (let key in dataaa) {
                                
                                firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).once('value', (snapshottt) => {
                                    
                                    var dataaa = snapshottt.val();
                                    if (snapshottt.exists()) {
                                        
                                        for (let keyy in dataaa) {
                                            
                                            
                                            
                                            firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).child(keyy).once('value', (snapshottt) => {
                                                
                                                var dataaaf = snapshottt.val();
                                                temp+=1;
                                                
                                                
                                                if (snapshottt.exists()) {
                                                    
                                                    if (snapshottt.child("notifications").child("Declined").child(userID).exists()) {
                                                        firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).child(keyy).child("notifications").child("Declined").child(userID).remove();
                                                    }
                                                    if (snapshottt.child("notifications").child("Accepted").child(userID).exists()) {
                                                        firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).child(keyy).child("notifications").child("Accepted").child(userID).remove();
                                                    }
                                                    if (snapshottt.child("notifications").child("Pending").child(userID).exists()) {
                                                        firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).child(keyy).child("notifications").child("Pending").child(userID).remove();
                                                    }
                                                    
                                                    
                                                }
                                                
                                                if(temp>=totalNumberOfEmergencies){
                                                    //alert(temp);
                                                    location.reload();
                                                }
                                            });
                                        }
                                    }
                                });
                            }
                        }
                    });
                }
            });
        
        
        /*
        if (confirm('')) {



            firebase.database().ref('user/').child(userID).once('value', (snapshottt) => {

                var dataaa = snapshottt.val();

                var bd = document.getElementById("allUsers");

                if (snapshottt.exists()) {
                    //alert(snapshottt.key);
                    firebase.database().ref('user/').child(userID).remove();
                }

            });




            firebase.database().ref('Centers/' + centerLoc + '/members/').child(userID).once('value', (snapshottt) => {

                var dataaa = snapshottt.val();


                if (snapshottt.exists()) {
                    //alert("HERE " + snapshottt.key);
                    firebase.database().ref('Centers/' + centerLoc + '/members/').child(userID).remove();
                }

            });







            firebase.database().ref('Centers/' + centerLoc + '/broadcast/').once('value', (snapshottt) => {

                var dataaa = snapshottt.val();

                if (snapshottt.exists()) {

                    for (let key in dataaa) {

                        firebase.database().ref('Centers/' + centerLoc + '/broadcast/').child(key).child(userID).once('value', (snapshottt) => {

                            var dataaa = snapshottt.val();
                            if (snapshottt.exists()) {
                                //alert(key + " " + snapshottt.key);
                                firebase.database().ref('Centers/'+centerLoc+'/broadcast/').child(key).child(userID).remove();
                            }
                        });
                    }
                }
            });




            firebase.database().ref('Centers/' + centerLoc + '/reports/').once('value', (snapshottt) => {

                var dataaa = snapshottt.val();

                if (snapshottt.exists()) {

                    for (let key in dataaa) {

                        firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).once('value', (snapshottt) => {

                            var dataaa = snapshottt.val();
                            if (snapshottt.exists()) {

                                for (let keyy in dataaa) {



                                    firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).child(keyy).once('value', (snapshottt) => {

                                        var dataaaf = snapshottt.val();

                                        if (snapshottt.exists()) {

                                            if (snapshottt.child("didntcome").child(userID).exists()) {
                                                firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).child(keyy).child("didntcome").child(userID).remove();
                                            }
                                            if (snapshottt.child("came").child(userID).exists()) {
                                                firebase.database().ref('Centers/' + centerLoc + '/reports/').child(key).child(keyy).child("came").child(userID).remove();
                                            }

                                        }
                                        location.reload();
                                    });


                                }

                            }
                        });
                    }
                }
            });
        }





        else {


        }
         */
        
        
        
        
    }

</script>


<script>
    
    function logout() {
        
        
        firebase.auth().signOut()
            
            .then(function () {
                
                localStorage.clear();
                window.location.href = 'index.html';
                
                //location.reload();
                
                
                // Sign-out successful.
                
            })
            
            .catch(function (error) {
                
                alert("SIGN OUT ERROR");
                
                // An error happened
                
            });
        
    }


</script>


</body>


<footer class="footer-basic-centered" style="margin-top: 350px; background-color:#e6e6e6; bottom: 0; width: 100%">
    
    <p class="footer-company-motto" style = "color: #000000">Lebanese Red Cross</p>
    
    <div class="container2" style="margin-top:10px;">
        
        <div class="b">
            
            <div style="height:20px;font-size:1px;">&nbsp;</div>
            <p style="text-decoration: none; color:#000000;font-family:Tahoma;text-align:left;font-size: 15px;">Per Humanitatem ad Pacem - With Humanity, Towards Peace</p>
            
            <br><div style="height:19px;"></div>
            
            <p style="color:#000000;font-family:Tahoma;text-align:left;font-size: 15px;">Developed & Designed by <a href="mailto:ahmad_kassabieh@msn.com" id ="footerRef" style="text-decoration: none;  ">Ahmad Kassabieh</a><br>
            </p>
        </div>
        <div class="a">
            <img src='images/LogoRC.png' style="width:150px; height: 150px;"></img>
        </div>
    </div>
    <br><br>
    
    <p class="footer-company-name" style="color: black; font-size: 10px;">Lebanese Red Cross &copy; 2019. All Rights Reserved.</p>
</footer>




</html>